//
// Matrices for converting to and from an order-6 Bezier.
//


// Matrices for approximating order-6 Bezier by lower order Bezier

const float kBezier6To5[6][7] = 
{
    {  0.9989f,  0.0065f, -0.0162f,  0.0216f, -0.0162f,  0.0065f, -0.0011f },
    { -0.1920f,  1.1520f,  0.1201f, -0.1602f,  0.1201f, -0.0481f,  0.0080f },
    {  0.0716f, -0.4299f,  1.0747f,  0.5671f, -0.4253f,  0.1701f, -0.0283f },
    { -0.0284f,  0.1701f, -0.4253f,  0.5671f,  1.0747f, -0.4299f,  0.0716f },
    {  0.0080f, -0.0481f,  0.1201f, -0.1602f,  0.1201f,  1.1520f, -0.1920f },
    { -0.0011f,  0.0065f, -0.0162f,  0.0216f, -0.0162f,  0.0065f,  0.9989f }
};

const float kBezier6To4[5][7] = 
{
    {  0.9870f,  0.0541f, -0.0758f,  0.0216f,  0.0433f, -0.0411f,  0.0108f },
    { -0.4123f,  1.1288f,  0.5411f, -0.2056f, -0.2327f,  0.2478f, -0.0671f },
    {  0.1959f, -0.6753f,  0.4383f,  1.0823f,  0.4383f, -0.6753f,  0.1959f },
    { -0.0671f,  0.2478f, -0.2327f, -0.2056f,  0.5411f,  1.1288f, -0.4123f },
    {  0.0108f, -0.0411f,  0.0433f,  0.0216f, -0.0758f,  0.0541f,  0.9870f }
};

const float kBezier6To3[4][7] = 
{
    {  0.9286f,  0.1905f, -0.0952f, -0.0952f,  0.0238f,  0.0952f, -0.0476f },
    { -0.5476f,  0.7143f,  0.8571f,  0.3810f, -0.2143f, -0.4286f,  0.2381f },
    {  0.2381f, -0.4286f, -0.2143f,  0.3810f,  0.8571f,  0.7143f, -0.5476f },
    { -0.0476f,  0.0952f,  0.0238f, -0.0952f, -0.0952f,  0.1905f,  0.9286f }
};

const float kBezier6To2[3][7] = 
{
    {  0.7619f,  0.3571f,  0.0714f, -0.0952f, -0.1429f, -0.0714f,  0.1190f },
    { -0.4524f,  0.1429f,  0.5000f,  0.6190f,  0.5000f,  0.1429f, -0.4524f },
    {  0.1190f, -0.0714f, -0.1429f, -0.0952f,  0.0714f,  0.3571f,  0.7619f }
};


// Matrices for upsampling lower-order Bezier to order-6 Bezier

const float kBezier5To6[7][6] = 
{
    {  1.0000f, -0.0000f, -0.0000f,  0.0000f,  0.0000f,  0.0000f },
    {  0.1667f,  0.8333f, -0.0000f, -0.0000f, -0.0000f, -0.0000f },
    {  0.0000f,  0.3334f,  0.6667f,  0.0001f,  0.0001f,  0.0000f },
    { -0.0000f, -0.0001f,  0.4999f,  0.4999f, -0.0001f, -0.0000f },
    {  0.0000f,  0.0000f,  0.0000f,  0.6667f,  0.3333f, -0.0000f },
    { -0.0000f, -0.0000f, -0.0000f, -0.0000f,  0.8333f,  0.1667f },
    {  0.0000f,  0.0000f,  0.0000f,  0.0000f,  0.0000f,  1.0000f }
};

const float kBezier4To6[7][5] = 
{
    {  1.0000f, -0.0000f, -0.0000f,  0.0000f,  0.0000f },
    {  0.3333f,  0.6667f, -0.0000f, -0.0000f, -0.0000f },
    {  0.0667f,  0.5334f,  0.4001f,  0.0001f,  0.0001f },
    { -0.0000f,  0.1999f,  0.5999f,  0.1999f, -0.0000f },
    {  0.0000f,  0.0000f,  0.4000f,  0.5334f,  0.0667f },
    { -0.0000f, -0.0000f, -0.0000f,  0.6667f,  0.3333f },
    {  0.0000f,  0.0000f,  0.0000f,  0.0000f,  1.0000f }
};

const float kBezier3To6[7][4] = 
{
    {  1.0000f, -0.0000f,  0.0000f,  0.0000f },
    {  0.5000f,  0.5000f, -0.0000f, -0.0000f },
    {  0.2000f,  0.6001f,  0.2001f,  0.0001f },
    {  0.0499f,  0.4499f,  0.4499f,  0.0500f },
    {  0.0000f,  0.2000f,  0.6000f,  0.2000f },
    { -0.0000f, -0.0000f,  0.5000f,  0.5000f },
    {  0.0000f,  0.0000f,  0.0000f,  1.0000f }
};

const float kBezier2To6[7][3] = 
{
    {  1.0000f, -0.0000f,  0.0000f },
    {  0.6667f,  0.3333f, -0.0001f },
    {  0.4001f,  0.5334f,  0.0668f },
    {  0.1999f,  0.5999f,  0.1999f },
    {  0.0667f,  0.5334f,  0.4000f },
    { -0.0000f,  0.3333f,  0.6667f },
    {  0.0000f,  0.0000f,  1.0000f }
};


// Matrix for evaluating L2 difference between two order-6 Bezier basis functions

// L2(c1, c2) = sqrt((c1 - c2)t M (c1 - c2)
//            = sqrt(dot(c1 - c2, kBezierError6 * (c1 - c2)) 

const float kBezierError6[7][7] = 
{
    { 0.07692f, 0.03846f, 0.01748f, 0.00699f, 0.00233f, 0.00058f, 0.00008f },
    { 0.03846f, 0.04196f, 0.03147f, 0.01865f, 0.00874f, 0.00300f, 0.00058f },
    { 0.01748f, 0.03147f, 0.03497f, 0.02914f, 0.01873f, 0.00874f, 0.00233f },
    { 0.00699f, 0.01865f, 0.02914f, 0.03330f, 0.02914f, 0.01865f, 0.00699f },
    { 0.00233f, 0.00874f, 0.01873f, 0.02914f, 0.03497f, 0.03147f, 0.01748f },
    { 0.00058f, 0.00300f, 0.00874f, 0.01865f, 0.03147f, 0.04196f, 0.03846f },
    { 0.00008f, 0.00058f, 0.00233f, 0.00699f, 0.01748f, 0.03846f, 0.07692f }
};

// Matrix for converting integrals v order-6 Bezier basis functions to corresponding Bezier coefficients

const float kToBezier6[7][7] = 
{
    {     49.00f,   -147.00f,    245.00f,   -245.00f,    147.00f,    -49.00f,      7.00f },
    {   -147.00f,    702.33f,  -1388.34f,   1519.00f,   -963.67f,    333.67f,    -49.00f },
    {    245.00f,  -1388.33f,   3211.14f,  -3890.61f,   2646.47f,   -963.67f,    147.00f },
    {   -245.00f,   1519.00f,  -3890.60f,   5240.21f,  -3890.61f,   1519.00f,   -245.00f },
    {    147.00f,   -963.67f,   2646.47f,  -3890.60f,   3211.14f,  -1388.34f,    245.00f },
    {    -49.00f,    333.67f,   -963.67f,   1519.00f,  -1388.34f,    702.34f,   -147.00f },
    {      7.00f,    -49.00f,    147.00f,   -245.00f,    245.00f,   -147.00f,     49.00f }
};
