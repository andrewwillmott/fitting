//
// Matrices for converting to and from an order-6 Bezier.
//


// Matrices for approximating order-6 Bezier by lower order Bezier

const float kBezier6To5[6][7] = 
{
    {  0.9989f, 0.006492f, -0.01624f, 0.02164f, -0.01623f, 0.006494f, -0.001081f },
    {  -0.192f,   1.152f,  0.1201f, -0.1602f,  0.1201f, -0.04805f, 0.008004f },
    { 0.07165f, -0.4299f,   1.075f,  0.5671f, -0.4253f,  0.1701f, -0.02835f },
    { -0.02836f,  0.1701f, -0.4253f,  0.5671f,   1.075f, -0.4299f, 0.07164f },
    { 0.00801f, -0.04805f,  0.1201f, -0.1602f,  0.1201f,   1.152f,  -0.192f },
    { -0.001082f, 0.006493f, -0.01623f, 0.02165f, -0.01623f, 0.006493f,  0.9989f }
};

const float kBezier6To4[5][7] = 
{
    {   0.987f, 0.05411f, -0.07576f, 0.02165f, 0.04329f, -0.04113f, 0.01082f },
    { -0.4123f,   1.129f,  0.5411f, -0.2056f, -0.2327f,  0.2478f, -0.0671f },
    {  0.1959f, -0.6753f,  0.4383f,   1.082f,  0.4383f, -0.6753f,  0.1959f },
    { -0.0671f,  0.2478f, -0.2327f, -0.2056f,  0.5411f,   1.129f, -0.4123f },
    { 0.01082f, -0.04113f, 0.04329f, 0.02165f, -0.07576f, 0.05411f,   0.987f }
};

const float kBezier6To3[4][7] = 
{
    {  0.9286f,  0.1905f, -0.09524f, -0.09524f, 0.02381f, 0.09524f, -0.04762f },
    { -0.5476f,  0.7143f,  0.8571f,   0.381f, -0.2143f, -0.4286f,  0.2381f },
    {  0.2381f, -0.4286f, -0.2143f,   0.381f,  0.8571f,  0.7143f, -0.5476f },
    { -0.04762f, 0.09524f, 0.02381f, -0.09524f, -0.09524f,  0.1905f,  0.9286f }
};

const float kBezier6To2[3][7] = 
{
    {  0.7619f,  0.3571f, 0.07143f, -0.09524f, -0.1429f, -0.07143f,   0.119f },
    { -0.4524f,  0.1429f,     0.5f,   0.619f,     0.5f,  0.1429f, -0.4524f },
    {   0.119f, -0.07143f, -0.1429f, -0.09524f, 0.07143f,  0.3571f,  0.7619f }
};


// Matrices for upsampling lower-order Bezier to order-6 Bezier

const float kBezier5To6[7][6] = 
{
    {       1f, -6.68e-06f, -3.714e-06f, 4.321e-07f, 4.053e-06f, 4.649e-06f },
    {  0.1667f,  0.8333f, -1.703e-05f, -3.016e-05f, -3.433e-05f, -2.575e-05f },
    { 2.459e-05f,  0.3334f,  0.6667f, 8.249e-05f, 7.915e-05f, 4.196e-05f },
    { -2.971e-05f, -6.813e-05f,  0.4999f,  0.4999f, -5.245e-05f, -1.907e-05f },
    { 1.55e-05f, 1.931e-05f, 2.003e-05f,  0.6667f,  0.3333f, -7.629e-06f },
    { -3.675e-06f, -8.687e-06f, -7.093e-06f, -5.007e-06f,  0.8333f,  0.1667f },
    { 1.086e-06f, 1.55e-06f, 7.153e-07f, 1.49e-06f, 1.311e-06f,       1f }
};

const float kBezier4To6[7][5] = 
{
    {       1f, -6.15e-06f, -2.071e-06f, 4.172e-06f, 5.186e-06f },
    {  0.3333f,  0.6667f, -3.32e-05f, -4.053e-05f, -3.195e-05f },
    {  0.0667f,  0.5334f,  0.4001f, 9.823e-05f, 5.627e-05f },
    { -4.56e-05f,  0.1999f,  0.5999f,  0.1999f, -2.67e-05f },
    { 1.335e-05f, 2.766e-05f,     0.4f,  0.5334f, 0.06667f },
    { -5.722e-06f, -9.775e-06f, -8.583e-06f,  0.6667f,  0.3333f },
    { 1.308e-06f, 2.161e-06f, 1.013e-06f, 1.192e-06f,       1f }
};

const float kBezier3To6[7][4] = 
{
    {       1f, -6.046e-06f, 1.565e-06f, 5.901e-06f },
    {     0.5f,     0.5f, -4.578e-05f, -4.148e-05f },
    {     0.2f,  0.6001f,  0.2001f, 6.866e-05f },
    { 0.04994f,  0.4499f,  0.4499f, 0.04996f },
    { 1.407e-05f,     0.2f,     0.6f,     0.2f },
    { -6.989e-06f, -1.168e-05f,     0.5f,     0.5f },
    { 1.583e-06f, 2.146e-06f, 1.431e-06f,       1f }
};

const float kBezier2To6[7][3] = 
{
    {       1f, -3.785e-06f, 5.841e-06f },
    {  0.6667f,  0.3333f, -5.817e-05f },
    {  0.4001f,  0.5334f, 0.06676f },
    {  0.1999f,  0.5999f,  0.1999f },
    { 0.06669f,  0.5334f,     0.4f },
    { -5.782e-06f,  0.3333f,  0.6667f },
    { 2.265e-06f, 7.153e-07f,       1f }
};


// Matrix for evaluating L2 difference between two order-6 Bezier basis functions

// L2(c1, c2) = sqrt((c1 - c2)t M (c1 - c2)
//            = sqrt(dot(c1 - c2, kBezierError6 * (c1 - c2)) 

const float kBezierError6[7][7] = 
{
    { 0.076923f, 0.038462f, 0.017483f, 0.006993f, 0.002331f, 0.00058275f, 8.325e-05f },
    { 0.038462f, 0.041958f, 0.031469f, 0.018648f, 0.0087413f, 0.002997f, 0.00058275f },
    { 0.017483f, 0.031469f, 0.034965f, 0.029138f, 0.018731f, 0.0087413f, 0.002331f },
    { 0.006993f, 0.018648f, 0.029138f,  0.0333f, 0.029138f, 0.018648f, 0.006993f },
    { 0.002331f, 0.0087413f, 0.018731f, 0.029138f, 0.034965f, 0.031469f, 0.017483f },
    { 0.00058275f, 0.002997f, 0.0087413f, 0.018648f, 0.031469f, 0.041958f, 0.038462f },
    { 8.325e-05f, 0.00058275f, 0.002331f, 0.006993f, 0.017483f, 0.038462f, 0.076923f }
};

// Matrix for converting integrals v order-6 Bezier basis functions to corresponding Bezier coefficients

const float kToBezier6[7][7] = 
{
    {        49f,  -1.5e+02f,   2.5e+02f,  -2.5e+02f,   1.5e+02f,       -49f,         7f },
    {  -1.5e+02f,     7e+02f,  -1.4e+03f,   1.5e+03f,  -9.6e+02f,   3.3e+02f,       -49f },
    {   2.5e+02f,  -1.4e+03f,   3.2e+03f,  -3.9e+03f,   2.6e+03f,  -9.6e+02f,   1.5e+02f },
    {  -2.5e+02f,   1.5e+03f,  -3.9e+03f,   5.2e+03f,  -3.9e+03f,   1.5e+03f,  -2.5e+02f },
    {   1.5e+02f,  -9.6e+02f,   2.6e+03f,  -3.9e+03f,   3.2e+03f,  -1.4e+03f,   2.5e+02f },
    {       -49f,   3.3e+02f,  -9.6e+02f,   1.5e+03f,  -1.4e+03f,     7e+02f,  -1.5e+02f },
    {         7f,       -49f,   1.5e+02f,  -2.5e+02f,   2.5e+02f,  -1.5e+02f,        49f }
};
